;(function(root,factory){if(typeof define==='function'&&define.amd){define(factory);}else{root.viewport=factory();}}(this,function(){var getWidth,html=document.documentElement,docHead=document.head||document.getElementsByTagName('head')[0];var defaults={debug:false,modernize:false}
function debug(vp){console.log('\nViewport:',vp.name);console.log('    wmin:',vp.width&&vp.width[0]);console.log('    wmax:',vp.width&&vp.width[1]);console.log('    hmin:',vp.height&&vp.height[0]);console.log('    hmax:',vp.height&&vp.height[1]);console.log('    cond:',vp.condition);}
function shimInnerWidth(){var tempDiv,tempBody;var innerWidth=function(){return window.innerWidth;};var clientWidth=function(){return html.clientWidth;};if(innerWidth===undefined){getWidth=clientWidth;}
tempBody=document.createElement('body');tempBody.style.cssText='overflow:scroll';tempDiv=document.createElement('div');tempDiv.id='viewportjs-div-test-element;';tempDiv.style.cssText='position:absolute;top:-1000px;';tempDiv.innerHTML=['<style>','@media( width:'+html.clientWidth+'px ) {','body > #viewportjs-div-test-element {','width:10px !important','}','}','</style>'].join('');tempBody.appendChild(tempDiv);html.insertBefore(tempBody,docHead);if(tempDiv.offsetWidth===10){getWidth=clientWidth;}
else{getWidth=innerWidth;}
html.removeChild(tempBody);}
function modernize(vp){var mdnzr=window.Modernizr;if(!mdnzr||!mdnzr.addTest){return;}
mdnzr.addTest(vp.name,vp.test);}
function createTest(vp,debug){return function(){var innerWidth,wmin=true,wmax=true,hmin=true,hmax=true,test=true;if(vp.width){innerWidth=getWidth();wmin=innerWidth>=vp.width[0];wmax=vp.width[1]?innerWidth<=vp.width[1]:true;}
if(vp.height){hmin=html.clientHeight>=vp.height[0];hmax=vp.height[1]?html.clientHeight<=vp.height[1]:true;}
if(vp.condition){test=vp.condition();}
if(debug){console.log('\nViewport:',vp.name);console.log('    wmin:',wmin);console.log('    wmax:',wmax);console.log('    hmin:',hmin);console.log('    hmax:',hmax);console.log('    cond:',test);}
return wmin&&wmax&&hmin&&hmax&&test;};}
function Viewport(viewports,options){var value;this.vps={};this.viewports=viewports;this.options=options||{};this.length=viewports.length;for(var key in defaults){if(!this.options.hasOwnProperty(key)){this.options[key]=defaults[key];}}
if(this.options.debug)console.log('\nOptions:',this.options);for(var i=0;i<this.length;i++){var vp=this.viewports[i];this.vps[vp.name]=vp;this.vps[vp.name].test=createTest(vp,this.options.debug);if(this.options.debug){debug(this.vps[vp.name]);}
if(this.options.modernize){modernize(this.vps[vp.name]);}}
return this;}
Viewport.prototype={is:function(name){return this.current()&&this.current().name===name;},get:function(name){return this.vps[name];},current:function(){var current;for(var i=0;i<this.viewports.length;i++){var v=this.viewports[i],name=v.name;if(!this.vps[name].test()){continue;}
current=v;}
return current;},matches:function(name){return this.vps[name].test();}};shimInnerWidth();return function(viewports,options){return new Viewport(viewports,options);};}));