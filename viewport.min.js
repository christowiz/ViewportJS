/* ViewportJS 0.5.0 | https://github.com/ryanfitzer/ViewportJS | Copyright (c) 2012 Ryan Fitzer | License: (http://www.opensource.org/licenses/mit-license.php) */
(function(a,b){if(typeof define==="function"&&define.amd){define(b);}else{a.viewport=b();}}(this,function(){var b,m=false,g=document.documentElement;var k={width:0,height:0};var j={name:"",width:[],height:[]};var a=[];var i=(function i(){var t,q,p,s=document.head||document.getElementsByTagName("head")[0];var r=function(){return window.innerWidth;};var o=function(){return g.clientWidth;};if(window.innerWidth===undefined){t=o;}else{p=document.createElement("body");p.style.cssText="overflow:scroll";q=document.createElement("div");q.id="viewportjs-div-test-element";q.style.cssText="position:absolute;top:-1000px;";q.innerHTML=["<style>","@media( width:"+g.clientWidth+"px ) {","#viewportjs-div-test-element {","width:10px !important","}","}","</style>"].join("");p.appendChild(q);g.insertBefore(p,s);if(q.offsetWidth===10){t=o;}else{t=r;}g.removeChild(p);}return t;})();function c(){return{width:i(),height:g.clientHeight};}function n(){var o=c();k={width:o.width,height:o.height};l();}function f(){clearTimeout(b);b=setTimeout(function(){if(!m){m=true;}n();},100);}function l(){var q;for(var p=0,o=a.length;p<o;p++){q=a[p];q[0].update.call(q[0]);q[1].size=k;}}function h(o,p){return function(){return p.apply(o,arguments);};}function d(o){return function(){var u=true,r=true,p=true,s=true,t=true,q=k;if(o.width){u=q.width>=o.width[0];r=o.width[1]?q.width<=o.width[1]:true;}if(o.height){p=q.height>=o.height[0];s=o.height[1]?q.height<=o.height[1]:true;}return u&&r&&p&&s&&t;};}function e(r){this.vps={};this.viewports=r;this.state={};this.state.channels={};this.state.tokenUid=-1;this.state.subscribers={};this.state.previous=j;this.state.present=j;this.state.initialUpdate=true;for(var q=0,o=this.viewports.length;q<o;q++){var p=this.viewports[q];this.vps[p.name]=p;this.vps[p.name].test=d(p);}return this;}e.prototype={is:function(o){var p=this.current();return p.name===o;},current:function(){var s=j;for(var r=0,o=this.viewports.length;r<o;r++){var p=this.viewports[r],q=p.name;if(!this.vps[q]){continue;}if(!this.vps[q].test()){continue;}s=p;}return s;},matches:function(o){return this.vps[o]&&this.vps[o].test();},subscribe:function(o,q){var p;if(!(o in this.vps)&&o!=="*"){throw new Error('The viewport "'+o+'" does not match any configured viewports.');}this.state.tokenUid=this.state.tokenUid+1;if(!this.state.channels[o]){this.state.channels[o]=[];}p=this.state.channels[o];p.push({token:this.state.tokenUid,method:q});if(o===this.state.present.name){q(true,this.state.present);}if(o==="*"){q(this.state.present);}return this.state.tokenUid;},unsubscribe:function(r){var s;for(var p in this.state.channels){s=this.state.channels[p];if(!s){continue;}for(var q=0,o=s.length;q<o;q++){if(!(s[q].token===r)){continue;}s.splice(q,1);}}},publish:function(o,p){var q=this.state.channels[o],r=q?q.length:0;if(!q){return;}while(r--){if(o==="*"){q[r].method(this.state.present);}else{q[r].method(p,this.vps[o]);}}},update:function(){if(!this.state.subscribers){return;}if(this.state.initialUpdate||m){if(this.state.initialUpdate){this.state.initialUpdate=false;}this.state.previous=this.state.present;this.state.present=this.current();}if(this.state.present===this.state.previous){return;}this.publish(this.state.previous.name,false);this.publish(this.state.present.name,true);this.publish("*");}};if("addEventListener" in window){window.addEventListener("resize",f);window.addEventListener("orientationchange",f);}else{window.attachEvent("onresize",f);}n();return function(o){var p,q=new e(o);q.update();p={size:k,vps:q.vps,viewports:q.viewports,is:h(q,q.is),current:h(q,q.current),matches:h(q,q.matches),subscribe:h(q,q.subscribe),unsubscribe:h(q,q.unsubscribe),};a.push([q,p]);return p;};}));